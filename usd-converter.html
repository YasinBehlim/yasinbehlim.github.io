<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>USD Converter - Crypto Learning Hub</title>
  <style>
    :root { --bg:#0d1117; --panel:#161b22; --text:#fff; --accent:#238636; --muted:#8b949e; }
    body { margin:0; font-family:Arial,sans-serif; background:var(--bg); color:var(--text); padding:20px; min-height:100vh; }
    nav { background:var(--panel); text-align:center; padding:12px 0; position:sticky; top:0; z-index:100; box-shadow:0 2px 10px rgba(0,0,0,0.5); }
    nav a { color:var(--text); margin:0 12px; text-decoration:none; font-weight:500; transition:.3s; }
    nav a.active { color:var(--accent); font-weight:bold; }
    nav a:hover { color:#2fa85f; text-decoration:underline; }
    h1 { color:var(--accent); text-align:center; }
    .tagline { text-align:center; color:var(--muted); margin-bottom:30px; font-style:italic; }
    .calculator-card, .price-card { background:var(--panel); padding:20px; border-radius:16px; box-shadow:0 6px 20px rgba(0,0,0,0.4); margin-bottom:20px; max-width:600px; margin-left:auto; margin-right:auto; }
    .calculator-card input, .calculator-card select { width:100%; padding:12px; margin:8px 0; border-radius:8px; border:none; background:#0001; color:var(--text); font-size:1rem; }
    .calculator-card button { width:100%; padding:12px; background:var(--accent); color:#fff; border:none; border-radius:8px; font-weight:bold; cursor:pointer; margin-top:10px; }
    .calculator-card button:hover { background:#2fa85f; }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    @media(max-width:640px) { .row { grid-template-columns:1fr; } }
    #livePrice { font-size:1.2rem; margin-top:12px; color:var(--muted); }
  </style>
</head>
<body>

  <nav>
    <a href="index.html">Home</a> |
    <a href="profit-loss.html">Profit/Loss</a> |
    <a href="position-size.html">Position Size</a> |
    <a href="usd-converter.html" class="active">USD Converter</a> |
    <a href="about.html">About</a> |
    <a href="contact.html">Contact</a>
  </nav>

  <h1>Crypto Learning Hub</h1>
  <p class="tagline">Convert crypto to USD easily</p>

  <!-- Live Price Card -->
  <div class="price-card">
    <h2 style="color:#238636;margin-bottom:12px;">Live Coin Price</h2>
    <input type="text" id="coinSearch" placeholder="Search coin...">
    <select id="coinDropdown"></select>
    <button onclick="fetchPrice()">Check Price</button>
    <p id="livePrice"></p>
  </div>

  <!-- USD Converter -->
  <div class="calculator-card">
    <h2>Crypto â†’ USD Converter</h2>
    <div class="row">
      <input type="number" step="any" id="coinPrice" placeholder="Coin price (USD)">
      <input type="number" step="any" id="coinAmount" placeholder="Amount of coins">
    </div>
    <button onclick="convertUSD()">Convert</button>
    <p id="usdResult"></p>
  </div>

<script>
let allCoins = [];

// Fetch coins
fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1')
  .then(r => r.json())
  .then(data => { allCoins = data; populateCoinDropdown(allCoins); })
  .catch(e => console.error('Error fetching coins:', e));

function populateCoinDropdown(coins) {
  const dd = document.getElementById('coinDropdown');
  dd.innerHTML = '';
  coins.forEach(c => {
    const opt = document.createElement('option');
    opt.value = c.id;
    opt.textContent = `${c.name} (${c.symbol.toUpperCase()})`;
    dd.appendChild(opt);
  });
}

document.getElementById('coinSearch').addEventListener('input', e => {
  const q = e.target.value.toLowerCase();
  const filtered = allCoins.filter(c => c.name.toLowerCase().includes(q) || c.symbol.toLowerCase().includes(q));
  populateCoinDropdown(filtered);
});

function fetchPrice() {
  const coinId = document.getElementById('coinDropdown').value;
  fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${coinId}&vs_currencies=usd`)
    .then(r => r.json())
    .then(d => { document.getElementById('livePrice').innerHTML = `Price: <strong style="color:#238636">$${d[coinId].usd}</strong>`; })
    .catch(e => { console.error(e); document.getElementById('livePrice').textContent='Unable to fetch price'; });
}

function convertUSD() {
  const price = +document.getElementById('coinPrice').value;
  const amount = +document.getElementById('coinAmount').value;
  const total = price * amount;
  document.getElementById('usdResult').innerHTML = `Total: <strong style="color:#238636">$${total.toFixed(2)}</strong>`;
}
</script>

</body>
</html>
